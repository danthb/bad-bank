{"version":3,"sources":["Components/WithDraw/withdraw.js","Components/BankForm/BankForm.js"],"names":["Withdraw","auth","useContext","AuthContext","bgcolor","label","handle","data","user","users","filter","isLogedU","index","indexOf","balance","console","log","amount","Number","alert","hideAmount","successButton","BankForm","bgheader","useState","show","setShow","status","setStatus","setAmount","setBalance","userLoged","setUserLogged","name","setName","email","setEmail","password","setPassword","validateDataUser","field","length","setTimeout","useEffect","getBalance","header","body","id","placeholder","value","onChange","e","currentTarget","type","isNaN","target","title","variant","color","disabled","buttonDisabled","onClick","className","to"],"mappings":"6GAAA,iFAIe,SAASA,IAEtB,IAAMC,EAAOC,qBAAWC,KAmBtB,OACE,cAAC,WAAD,UACE,cAAC,IAAD,CACAC,QAAQ,OACRC,MAAM,WACNC,OAvBS,SAACC,GAEZ,IAAIC,EAAOP,EAAKQ,MAAMC,QAAO,SAAAF,GAAI,OAAsB,IAAlBA,EAAKG,YACtCC,EAAQX,EAAKQ,MAAMI,QAAQL,EAAK,IAChCM,EAAUb,EAAKQ,MAAMG,GAAOE,QAKhC,OAJAC,QAAQC,IAAIF,GACZC,QAAQC,IAAIT,EAAKU,QAGbH,EAAU,GAAKA,GAAWI,OAAOX,EAAKU,SAAWC,OAAOX,EAAKU,SAAW,GAC1EhB,EAAKQ,MAAMG,GAAOE,SAAWI,OAAOX,EAAKU,QACzCE,MAAM,sCAAD,OAAuClB,EAAKQ,MAAMG,GAAOE,WAKzD,IAHLK,MAAM,gCACC,IAUPC,YAAY,EACZC,cAAc,8B,sIC1BP,SAASC,EAAT,GAA4E,IAAzDlB,EAAwD,EAAxDA,QAAQmB,EAAgD,EAAhDA,SAASlB,EAAuC,EAAvCA,MAAMC,EAAiC,EAAjCA,OAAOc,EAA0B,EAA1BA,WAAWC,EAAe,EAAfA,cAEnEpB,EAAOC,qBAAWC,KAFgE,EAIxDqB,oBAAS,GAJ+C,mBAIjFC,EAJiF,KAI3EC,EAJ2E,OAKxDF,mBAAS,IAL+C,mBAKjFG,EALiF,KAKzEC,EALyE,OAMtDJ,mBAAS,IAN6C,mBAMjFP,EANiF,KAMzEY,EANyE,OAO1DL,mBAAS,IAPiD,mBAOjFV,EAPiF,KAOxEgB,EAPwE,OAQrDN,mBAAS,IAR4C,mBAQjFO,EARiF,KAQtEC,EARsE,OAWxDR,mBAAS,IAX+C,mBAWjFS,EAXiF,KAW3EC,EAX2E,OAYxDV,mBAAS,IAZ+C,mBAYjFW,EAZiF,KAY1EC,EAZ0E,OAaxDZ,mBAAS,IAb+C,mBAajFa,EAbiF,KAavEC,EAbuE,KAkCxF,SAASC,EAAiBC,EAAOnC,GAC/B,OAAKmC,IAKS,aAAVnC,GAAwBmC,EAAMC,OAAS,KACzCb,EAAU,sCACVc,YAAW,kBAAMd,EAAU,MAAI,MACxB,IAPPA,EAAU,gBAAkBvB,GAC5BqC,YAAW,kBAAMd,EAAU,MAAI,MACxB,GAXXe,qBAAU,WACHvB,GAZP,WACE,IAAIW,EAAY9B,EAAKQ,MAAMC,QAAO,SAAAF,GAAI,OAAsB,IAAlBA,EAAKG,YAC/CI,QAAQC,IAAIe,GACRA,EAAUU,OAAS,GACrBX,EAAWC,EAAU,GAAGjB,SACxBkB,GAAc,KAEdF,GAAW,GACXE,GAAc,IAKdY,KAGD,CAACnB,IAoGJ,OACI,cAAC,IAAD,CACMrB,QAASA,EACTmB,SAAUA,EACVsB,OAAQxC,EACRsB,OAAQA,EACRmB,KAAMrB,EACF,eAAC,WAAD,WAEEL,EACE,eAAC,WAAD,WACW,UAAVf,GACD,eAAC,WAAD,kBAEI,uBACA,cAAC,IAAD,CACE4B,KAAK,OACLc,GAAG,OACHC,YAAY,aACZC,MAAOhB,EACPiB,SAAU,SAAAC,GAAC,OAAIjB,EAAQiB,EAAEC,cAAcH,UACzC,0BAGF,uBAdF,SAeQ,uBACN,cAAC,IAAD,CACEhB,KAAK,QACLoB,KAAK,QACLN,GAAG,QACHC,YAAY,cACZC,MAAOd,EACPe,SAAU,SAAAC,GAAC,OAAIf,EAASe,EAAEC,cAAcH,UAC1C,uBACA,uBAxBF,WAyBU,uBACR,cAAC,IAAD,CACEI,KAAK,WACLN,GAAG,WACHC,YAAY,iBACZC,MAAOZ,EACPa,SAAU,SAAAC,GAAC,OAAIb,EAAYa,EAAEC,cAAcH,UAC7C,0BAGJ,eAAC,WAAD,wBACalB,EAAYjB,EAAU,KADnC,IACyC,uBACvC,uBACCT,EAAQ,UACT,uBACE,uBACEgD,KAAK,QACLN,GAAG,SACHC,YAAa,eACbC,MAAOhC,EACPiC,SA9HD,SAACC,GAEfG,MAAMpC,OAAOiC,EAAEI,OAAON,QAGzB9B,MAAM,qCAFNU,EAAUsB,EAAEI,OAAON,UA4HH,0BAGN,uBACA,cAAC,IAAD,CACEI,KAAK,SACLN,GAAG,SACHS,MAAkB,aAAVnD,GAAkC,YAAVA,EAAwB,sBAAwB,iBAChFoD,QAAQ,YACRC,MAAM,UACNC,SAvHO,WACrB,GAAc,mBAAVtD,EACF,MAAc,KAAV8B,GAA6B,KAAbE,GAA4B,KAATJ,EAMzC,GAAc,UAAV5B,EACF,MAAc,KAAV8B,GAA6B,KAAbE,EAOtB,GAAKjB,EA4BE,KAAIN,EAKT,OAAO,EAJP,GAAIA,GAAW,EACb,OAAO,MA9BM,CACf,GAAc,aAAVT,EACF,OAAKS,IAAYiB,IAGF,KAAXd,GACa,IAAXA,GAQD,GAAc,YAAVZ,EACT,OAAK0B,IAGU,KAAXd,GACa,IAAXA,IAoFc2C,GACVC,QAxJhB,WACE,GAAIzC,EAAY,CACd,GAAc,UAAVf,IACGkC,EAAiBN,EAAU,QAAS,OAE3C,IAAKM,EAAiBJ,EAAU,SAAa,OAC7C,IAAKI,EAAiBF,EAAU,YAAa,YAE7C,IAAKE,EAAiBtB,EAAQ,UAAW,OAG3CX,EADe,CAAC2B,OAAKE,QAAME,WAASpB,WAEpCS,GAAQ,IAqII,SAQGrB,OAIH,eAAC,WAAD,WACE,cAAC,IAAD,CACEgD,KAAK,SACLI,QAAQ,YACRC,MAAM,UACNG,QA1IlB,WACE3B,EAAQ,IACRE,EAAS,IACTE,EAAY,IACZT,EAAU,IACVH,GAAQ,IAiIM,SAKGL,IAEQ,mBAAVhB,EAA6B,cAAC,IAAD,CAC5BgD,KAAK,SACLI,QAAQ,YACRD,MAAM,wBACNE,MAAM,YAJsB,SAK5B,cAAC,IAAD,CAAMI,UAAU,WAAWC,GAAG,SAA9B,qBACU","file":"static/js/11.a904636d.chunk.js","sourcesContent":["import React, { Fragment, /* useState, */ useContext } from \"react\";\r\nimport { AuthContext } from \"../Auth/AuthProvider\";\r\nimport BankForm from \"../BankForm/BankForm\";\r\n\r\nexport default function Withdraw() {\r\n\r\n  const auth = useContext(AuthContext);  \r\n  const handle = (data) => {\r\n      \r\n      let user = auth.users.filter(user => user.isLogedU === true)\r\n      let index = auth.users.indexOf(user[0])\r\n      let balance = auth.users[index].balance\r\n      console.log(balance);\r\n      console.log(data.amount);\r\n\r\n\r\n      if (balance > 0 && balance >= Number(data.amount) && Number(data.amount) >= 0) {\r\n        auth.users[index].balance -= Number(data.amount)\r\n        alert(`Transaction done, your balance is $${auth.users[index].balance}`)\r\n      } else {\r\n        alert(\"You don't have enough money\")\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    return (\r\n      <Fragment>\r\n        <BankForm\r\n        bgcolor=\"info\"\r\n        label=\"Withdraw\"\r\n        handle={handle}\r\n        hideAmount={false}\r\n        successButton=\"Make another withdraw\"\r\n      />\r\n      </Fragment>\r\n    )\r\n       \r\n}","import React, { Fragment, useState, useContext, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { AuthContext } from \"../Auth/AuthProvider\";\r\nimport { Link } from 'react-router-dom';\r\nimport {Card } from '../../context'\r\nexport default function BankForm({bgcolor,bgheader,label,handle,hideAmount,successButton}){\r\n\r\n  const auth = useContext(AuthContext);\r\n  \r\n  const [show, setShow]         = useState(true);\r\n  const [status, setStatus]     = useState('');\r\n  const [amount, setAmount]       = useState('');\r\n  const [balance, setBalance] = useState('');\r\n  const [userLoged, setUserLogged] = useState('');\r\n\r\n// UserData\r\n  const [name, setName]         = useState('');\r\n  const [email, setEmail]       = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n\r\n  function getBalance(){\r\n    let userLoged = auth.users.filter(user => user.isLogedU === true);\r\n    console.log(userLoged)\r\n    if (userLoged.length > 0) {\r\n      setBalance(userLoged[0].balance)\r\n      setUserLogged(true)\r\n    } else {\r\n      setBalance(false)\r\n      setUserLogged(false)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (!hideAmount) {\r\n      getBalance()\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [show])\r\n\r\n  function validateDataUser(field, label){\r\n    if (!field) {\r\n      setStatus('Please enter ' + label);\r\n      setTimeout(() => setStatus(''),3000);\r\n      return false;\r\n    }\r\n    if (label === 'password' && field.length < 8) {\r\n      setStatus('Please enter at least 8 characters');\r\n      setTimeout(() => setStatus(''),3000);\r\n      return false\r\n    }\r\n    return true;\r\n  }\r\n  function handleForm(){\r\n    if (hideAmount) {\r\n      if (label !== 'Login') {\r\n        if (!validateDataUser(name,     'name')) return;\r\n      }\r\n      if (!validateDataUser(email,    'email'))    return;\r\n      if (!validateDataUser(password, 'password')) return;\r\n    } else {\r\n      if (!validateDataUser(amount, 'amount')) return;\r\n    }\r\n    let dataUser = {name,email,password,amount}\r\n    handle(dataUser)\r\n    setShow(false);\r\n  }\r\n  const handleAmount = (e) => {\r\n    // console.log(e.target.value);\r\n    if (!isNaN(Number(e.target.value))) {\r\n      setAmount(e.target.value)\r\n    } else {\r\n      alert('Only positive amounts are allowed')\r\n    }\r\n  }\r\n  \r\n\r\n  function clean(){\r\n    setName('');\r\n    setEmail('');\r\n    setPassword('');\r\n    setAmount('');\r\n    setShow(true);\r\n  }\r\n  \r\n  const buttonDisabled = () => {\r\n    if (label === 'Create Account') {\r\n      if (email !== '' || password !== '' || name !== '') {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n    if (label === 'Login') {\r\n      if (email !== '' || password !== '') {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n    // buttonDisabled when there isn't user logged\r\n    if (!hideAmount) {\r\n      if (label === 'Withdraw') {\r\n        if (!balance || !userLoged) {\r\n          return true\r\n        }\r\n        if (amount !== '') {\r\n          if (amount !== 0) {\r\n            return false\r\n          } else {\r\n            return true\r\n          }\r\n        } else {\r\n          return true\r\n        }\r\n      } else if (label === 'Deposit') {\r\n        if (!userLoged) {\r\n          return true\r\n        }\r\n        if (amount !== '') {\r\n          if (amount !== 0) {\r\n            return false\r\n          } else {\r\n            return true\r\n          }\r\n        } else {\r\n          return true\r\n        }\r\n      }\r\n    } else if (balance) {\r\n      if (balance <= 0) {\r\n        return true\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  \r\n  return(\r\n      <Card\r\n            bgcolor={bgcolor}\r\n            bgheader={bgheader}\r\n            header={label}\r\n            status={status}\r\n            body={show ? (\r\n                <Fragment>\r\n                {\r\n                  hideAmount\r\n                  ? <Fragment>\r\n                    {label !== 'Login' &&\r\n                    <Fragment>\r\n                      Name\r\n                        <br />\r\n                        <TextField\r\n                          name='name'\r\n                          id=\"name\"\r\n                          placeholder=\"Enter name\"\r\n                          value={name}\r\n                          onChange={e => setName(e.currentTarget.value)} />\r\n                        <br />\r\n                    </Fragment>\r\n                      }\r\n                      <br />\r\n                      Email <br/>\r\n                      <TextField\r\n                        name=\"email\"\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"Enter email\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.currentTarget.value)}/>\r\n                      <br />\r\n                      <br />\r\n                      Password<br />\r\n                      <TextField\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        placeholder=\"Enter password\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.currentTarget.value)} />\r\n                      <br />\r\n                  </Fragment>\r\n                  :\r\n                  <Fragment>\r\n                    Balance: ${userLoged ? balance : null} <br/>\r\n                    <br />\r\n                    {label + ' Amount'}\r\n                    <br />\r\n                      <input\r\n                        type=\"input\"\r\n                        id=\"amount\"\r\n                        placeholder={'Enter Amount'}\r\n                        value={amount}\r\n                        onChange={handleAmount} />\r\n                      <br />\r\n                  </Fragment>\r\n                }\r\n                <br />\r\n                <Button\r\n                  type=\"submit\"\r\n                  id='submit'\r\n                  title={(label === 'Withdraw' || label === 'Deposit' ) ? 'Confirm transaction' : 'Click to Login'}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  disabled={buttonDisabled()}\r\n                  onClick={handleForm} >\r\n                  {label}\r\n                </Button>\r\n                </Fragment>\r\n              ):(\r\n                <Fragment>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={clean}>\r\n                    {successButton}\r\n                  </Button>\r\n                  {label === 'Create Account' ? <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    title='Click to go the Login'\r\n                    color=\"secundary\">\r\n                    <Link className=\"nav-link\" to=\"/login\">Login</Link>\r\n                  </Button> : null}\r\n                </Fragment>\r\n            \r\n            )}\r\n            />\r\n       \r\n\r\n  )\r\n}"],"sourceRoot":""}